{% extends 'produits/base_generic.html' %}
{% block content %}
{% load static %}

<!-- Contenu spécifique à la page d'accueil -->
<div class="dashboard-container">
    <!-- Sidebar -->
    <aside class="sidebar">
        <h2 class="h4 mb-4" style="color: var(--primary);">Beauty Stock</h2>
        <nav class="nav flex-column">
            <a class="nav-link active" href="{% url 'home' %}">
                <i class="fas fa-cubes me-2"></i> Produits
            </a>
            <a class="nav-link" href="{% url 'ajouter_produit' %}">
                <i class="fas fa-plus-circle me-2"></i> Ajouter produit
            </a>
            <a class="nav-link" href="#">
                <i class="fas fa-chart-bar me-2"></i> Statistiques
            </a>
        </nav>
    </aside>

    <!-- Contenu principal -->
    <main class="p-4">
        <!-- Barre d'outils -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h3 class="mb-0">Gestion des produits</h3>
            <a href="{% url 'ajouter_produit' %}" class="btn btn-primary">
                <i class="fas fa-plus me-2"></i> Nouveau produit
            </a>
        </div>

        <!-- Tableau des produits -->
        <div class="product-table">
            <table class="table table-hover mb-0">
                <thead>
                    <tr>
                        <th>Nom</th>
                        <th>Catégorie</th>
                        <th>Prix</th>
                        <th>Stock</th>
                        <th>Expiration</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for produit in produits %}
                        <tr>
                            <td>
                                <div class="fw-500">{{ produit.nom }}</div>
                                <small class="text-muted">{{ produit.categorie }}</small>
                            </td>
                            <td><span class="category-badge">{{ produit.categorie }}</span></td>
                            <td>{{ produit.prix }}€</td>
                            <td>
                                <div class="d-flex align-items-center">
                                    <div class="progress" style="height: 8px; width: 100px;">
                                        <div class="progress-bar" style="width: {{ produit.stock|floatformat:0 }}%;"></div>
                                    </div>
                                    <small class="ms-2">{{ produit.stock }} unités</small>
                                </div>
                            </td>
                            <td class="expiry-warning">{{ produit.date_expiration|date:"d/m/Y" }}</td>
                            <td>
                                <a href="{% url 'modifier_produit' produit.id %}" class="btn btn-sm btn-outline-primary me-2">
                                    <i class="fas fa-edit"></i>
                                </a>
                                <a href="{% url 'supprimer_produit' produit.id %}" class="btn btn-sm btn-outline-danger">
                                    <i class="fas fa-trash"></i>
                                </a>
                            </td>
                        </tr>
                    {% empty %}
                        <tr>
                            <td colspan="6" class="text-center">Aucun produit trouvé</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </main>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}
